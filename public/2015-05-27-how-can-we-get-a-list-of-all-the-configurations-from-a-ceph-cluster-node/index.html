<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>How to fetch the entire list of tunables along with the values for a Ceph cluster node? - My New Hugo Site</title><meta name="Description" content="This is my cool site"><meta property="og:title" content="How to fetch the entire list of tunables along with the values for a Ceph cluster node?" />
<meta property="og:description" content="In many cases we would like to get the active configurations from a Ceph node, either a monitor or an OSD node. A neat feature, I must say, is to probe the administrative socket file to get a listing of all the active configurations, be it on the OSD node or the monitor node.
This comes handy when we have changed a setting and wants to confirm if it had indeed changed or not." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node/" /><meta property="og:image" content="http://example.org/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-05-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-08-03T20:52:51+02:00" /><meta property="og:site_name" content="My cool site" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/logo.png"/>

<meta name="twitter:title" content="How to fetch the entire list of tunables along with the values for a Ceph cluster node?"/>
<meta name="twitter:description" content="In many cases we would like to get the active configurations from a Ceph node, either a monitor or an OSD node. A neat feature, I must say, is to probe the administrative socket file to get a listing of all the active configurations, be it on the OSD node or the monitor node.
This comes handy when we have changed a setting and wants to confirm if it had indeed changed or not."/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node/" /><link rel="prev" href="http://example.org/2015-05-07-how-to-change-the-filling-ratio-for-a-ceph-osd/" /><link rel="next" href="http://example.org/2015-05-27-how-to-change-a-configuration-value-in-a-ceph-cluster-dynamically/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "How to fetch the entire list of tunables along with the values for a Ceph cluster node?",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node\/"
        },"genre": "posts","keywords": "admin-socket, ceph, config-show","wordcount":  532 ,
        "url": "http:\/\/example.org\/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node\/","datePublished": "2015-05-27T00:00:00+00:00","dateModified": "2021-08-03T20:52:51+02:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "xxxx"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="My New Hugo Site"></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="My New Hugo Site"></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">How to fetch the entire list of tunables along with the values for a Ceph cluster node?</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>xxxx</a></span>&nbsp;<span class="post-category">included in <a href="/categories/ceph/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>ceph</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2015-05-27">2015-05-27</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;532 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;3 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="true">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents"></nav></div>
            </div><div class="content" id="content"><p>In many cases we would like to get the active configurations from a Ceph node, either a monitor or an OSD node. A neat feature, I must say, is to probe the administrative socket file to get a listing of all the active configurations, be it on the OSD node or the monitor node.</p>
<p>This comes handy when we have changed a setting and wants to confirm if it had indeed changed or not.</p>
<p>The admin socket file exists for both the monitors and the OSD nodes. The monitor node will have a single admin socket file, while the OSD nodes will have an admin socket for each of the OSDs present on the node.</p>
<ul>
<li>Listing of the admin socket on a monitor node</li>
</ul>
<p>[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;] # ls /var/run/ceph/ -l total 4 srwxr-xr-x. 1 root root 0 May 13 05:13 ceph-mon.hp-m300-2.asok -rw-r&ndash;r&ndash;. 1 root root 7 May 13 05:13 mon.hp-m300-2.pid [/sourcecode]</p>
<ul>
<li>Listing of the admin sockets on an OSD node</li>
</ul>
<p>[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;] # ls -l /var/run/ceph/ total 20 srwxr-xr-x. 1 root root 0 May  8 02:42 ceph-osd.0.asok srwxr-xr-x. 1 root root 0 May 26 11:18 ceph-osd.2.asok srwxr-xr-x. 1 root root 0 May 26 11:18 ceph-osd.3.asok srwxr-xr-x. 1 root root 0 May  8 02:42 ceph-osd.4.asok srwxr-xr-x. 1 root root 0 May 26 11:18 ceph-osd.5.asok -rw-r&ndash;r&ndash;. 1 root root 8 May  8 02:42 osd.0.pid -rw-r&ndash;r&ndash;. 1 root root 8 May 26 11:18 osd.2.pid -rw-r&ndash;r&ndash;. 1 root root 8 May 26 11:18 osd.3.pid -rw-r&ndash;r&ndash;. 1 root root 8 May  8 02:42 osd.4.pid -rw-r&ndash;r&ndash;. 1 root root 8 May 26 11:18 osd.5.pid [/sourcecode]</p>
<p>For example, consider that we have changed the &lsquo;mon_osd_full_ratio&rsquo; value, and need to confirm that the cluster has picked up the change.</p>
<p>We can get a listing of the active configured settings and grep out the setting we are interested in.</p>
<p>[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;]</p>
<p># ceph daemon /var/run/ceph/ceph-mon.*.asok config show</p>
<p>[/sourcecode]</p>
<p>The above command prints out a listing of all the active configurations and their current values. We can easily grep out &lsquo;mon_osd_full_ratio&rsquo; from this list.</p>
<p>[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;]</p>
<p># ceph daemon /var/run/ceph/ceph-mon.*.asok config show | grep mon_osd_full_ratio</p>
<p>[/sourcecode]</p>
<p>On my test cluster, this printed out &lsquo;0.75&rsquo; which is the default setting. The cluster should print out &rsquo;near full&rsquo; warnings once any OSD has reached 75% of its size.</p>
<p>This can be checked by probing the OSD admin socket as well.</p>
<p>NOTE: In case you are probing a particular OSD, please make sure to use the OSD admin socket on the node in which the OSD is. In order to locate the OSD and the node it is on, use :</p>
<p>[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;]</p>
<p># ceph osd tree</p>
<p>[/sourcecode]</p>
<p>Example: We try probing the OSD admin socket on its node, for &lsquo;mon_osd_full_ratio&rsquo; as we did on the monitor. It should return the same value.</p>
<p>[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;]</p>
<p># ceph daemon /var/run/ceph/ceph-osd.5.asok config show | grep mon_osd_full_ratio</p>
<p>[/sourcecode]</p>
<p>NOTE: Another command exists which should print the same configuration settings, but only for OSDs.</p>
<p>[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;]</p>
<p># ceph daemon osd.5 config show</p>
<p>[/sourcecode]</p>
<p>A drawback worth mentioning, this should be executed on the node on which the OSD is present. To find that the OSD to node mapping, use &lsquo;ceph osd tree&rsquo;.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2021-08-03</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://example.org/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node/" data-title="How to fetch the entire list of tunables along with the values for a Ceph cluster node?" data-via="xxxx" data-hashtags="admin-socket,ceph,config-show"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://example.org/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node/" data-hashtag="admin-socket"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://example.org/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node/" data-title="How to fetch the entire list of tunables along with the values for a Ceph cluster node?"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://example.org/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node/" data-title="How to fetch the entire list of tunables along with the values for a Ceph cluster node?"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://example.org/2015-05-27-how-can-we-get-a-list-of-all-the-configurations-from-a-ceph-cluster-node/" data-title="How to fetch the entire list of tunables along with the values for a Ceph cluster node?"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/admin-socket/">admin-socket</a>,&nbsp;<a href="/tags/ceph/">ceph</a>,&nbsp;<a href="/tags/config-show/">config-show</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2015-05-07-how-to-change-the-filling-ratio-for-a-ceph-osd/" class="prev" rel="prev" title="How to change the filling ratio for a Ceph OSD?"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>How to change the filling ratio for a Ceph OSD?</a>
            <a href="/2015-05-27-how-to-change-a-configuration-value-in-a-ceph-cluster-dynamically/" class="next" rel="next" title="How to dynamically change a configuration value in a Ceph cluster?">How to dynamically change a configuration value in a Ceph cluster?<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.101.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">xxxx</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"cookieconsent":{"content":{"dismiss":"Got it!","link":"Learn more","message":"This website uses Cookies to improve your experience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
