<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Writing a minimalistic kernel module in Linux - Part 1 &middot; arvimal.github.io</title>
  <meta name="title" content="Writing a minimalistic kernel module in Linux - Part 1 &middot; arvimal.github.io" />
  
  
  <meta name="keywords" content="kernel, module, " />
  
  
  <link rel="canonical" href="https://arvimal.github.io/posts/2017/07/writing-a-minimalistic-kernel-module/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.56bbff84b98d1d666a5f08db39c6a3e39b4f90505c73fdbcafdc4112f678717d839e484eb5c89345df37dc363649902e52fa53c303551538be961769008472f9.css"
    integrity="sha512-Vrv/hLmNHWZqXwjbOcaj45tPkFBcc/28r9xBEvZ4cX2DnkhOtciTRd833DY2SZAuUvpTwwNVFTi&#43;lhdpAIRy&#43;Q==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.bd59ef8d591a8791be95815d202976ffd137f05712b3d68318c743252786ac432125c68ac83ad04ceafb3b9dfb9cbeed0de9a073d1a641deffe41b2fe15e5e1e.js"
    integrity="sha512-vVnvjVkah5G&#43;lYFdICl2/9E38FcSs9aDGMdDJSeGrEMhJcaKyDrQTOr7O537nL7tDemgc9GmQd7/5Bsv4V5eHg==" data-copy="" data-copied=""></script>
  
  
  <script src="/js/zoom.min.js"></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Writing a minimalistic kernel module in Linux - Part 1" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://arvimal.github.io/posts/2017/07/writing-a-minimalistic-kernel-module/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-07-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-07-27T00:00:00+00:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Writing a minimalistic kernel module in Linux - Part 1"/>
<meta name="twitter:description" content=""/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Writing a minimalistic kernel module in Linux - Part 1",
    "headline": "Writing a minimalistic kernel module in Linux - Part 1",
    
    
    "inLanguage": "en",
    "url" : "https:\/\/arvimal.github.io\/posts\/2017\/07\/writing-a-minimalistic-kernel-module\/",
    "author" : {
      "@type": "Person",
      "name": "Vimal A R"
    },
    "copyrightYear": "2017",
    "dateCreated": "2017-07-27T00:00:00\u002b00:00",
    "datePublished": "2017-07-27T00:00:00\u002b00:00",
    
    "dateModified": "2017-07-27T00:00:00\u002b00:00",
    
    "keywords": ["kernel","module"],
    
    "mainEntityOfPage": "true",
    "wordCount": "2075"
  }]
  </script>


  
  
  <meta name="author" content="Vimal A R" />
  
  
  
  <link href="https://linkedin.com/in/arvimal" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.js" integrity=""></script>


















  
  

  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">arvimal.github.io</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
            
  <a href="/posts/"  class="flex items-center">
    
    <p class="text-base font-medium text-gray-500 hover:text-gray-900" title="Posts">
        Blog
    </p>
</a>


            
            
  <a href="https://github.com/arvimal"  target="_blank"  class="flex items-center">
    
    <span  class="mr-1" >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


    </span>
    
    <p class="text-base font-medium text-gray-500 hover:text-gray-900" title="">
        GitHub
    </p>
</a>


            
            
  <a href="https://linkedin.com/in/arvimal"  target="_blank"  class="flex items-center">
    
    <p class="text-base font-medium text-gray-500 hover:text-gray-900" title="">
        LinkedIn
    </p>
</a>


            
            
  <a href="/about/"  class="flex items-center">
    
    <p class="text-base font-medium text-gray-500 hover:text-gray-900" title="">
        About
    </p>
</a>


            
            
  <a href=""  class="flex items-center">
    
    <p class="text-base font-medium text-gray-500 hover:text-gray-900" title="rss">
        RSS
    </p>
</a>


            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button">
                    <div class="flex items-center justify-center h-12 dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden h-12 dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" style="margin-right:5px">
                <div class="flex items-center justify-center h-12 dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden h-12 dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" for="menu-controller" class="block">
            <input type="checkbox" id="menu-controller" class="hidden" />
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li>
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                    
  <li class="mt-1">
    <a href="/posts/"  class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="Posts">
            Blog
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="https://github.com/arvimal"  target="_blank"  class="flex items-center">
        
        <div  class="mr-2" >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


        </div>
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="">
            GitHub
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="https://linkedin.com/in/arvimal"  target="_blank"  class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="">
            LinkedIn
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="/about/"  class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="">
            About
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href=""  class="flex items-center">
        
        <p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="rss">
            RSS
        </p>
    </a>
</li>



                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>





  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      Writing a minimalistic kernel module in Linux - Part 1
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      




































<div style="cursor: default;" class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2017-07-27 00:00:00 &#43;0000 UTC">27 July 2017</time><span class="px-2 text-primary-500">&middot;</span><span>2075 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">10 mins</span>
  

  
  
</div>







    </div>

    
    
    
    
    

    
    
    
<div class="flex">
  
  
  
  
  
  
  <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
    alt="Vimal A R" src="/images/avatar_hu391fc735dd9f1df079368dcc5daebe3e_37211_192x192_fill_q75_box_smart1.jpg" />
  
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      Vimal A R
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">Still figuring it out!</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://linkedin.com/in/arvimal"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>
    

    

    

    
    <div class="mb-5"></div>
    
  
  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
    

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="max-w-prose mb-20">
          <h2 class="relative group">Introduction 
    <div id="introduction" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#introduction" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>_<strong>L</strong>_oadable Kernel Modules (LKM) are object code that can be loaded into memory, often used for supporting hardware or enable specific features.</p>
<p>Kernel modules enable the core kernel to be minimal and have features to be loaded as required.</p>
<p>A kernel module is a normal file usually suffixed with <code>.ko</code> denoting it's a kernel object file. It contains compiled code from one or more source files, gets linked to the kernel when loaded, and runs in kernel space. It can dynamically adds functionality to a running kernel, without requiring a reboot.</p>
<p>Linux kernel modules are written in C, and is compiled for a specific kernel version. This is the ideal practice since kernel data structures may change across versions, and using a module compiled for a specific version may break for another.</p>
<p>Since kernel modules can be loaded and unloaded at will, it is pretty easy to unload an older version and load a newer one. This helps immensely in testing out new features since it is easy to change the source code, re-compile, unload the older version, load the newer version, and test the functionality.</p>
<h2 class="relative group">Structure 
    <div id="structure" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#structure" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Modules are expected to be under <code>/lib/modules/$(uname -r)/</code> within directories specified according to use case.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="o">[</span>root@centos7 3.10.0-514.26.2.el7.x86_64<span class="o">]</span> <span class="c1"># ls -l </span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">total <span class="m">2940</span> 
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">lrwxrwxrwx. <span class="m">1</span> root root <span class="m">43</span> Jul <span class="m">8</span> 05:10 build -&gt; /usr/src/kernels/3.10.0-514.26.2.el7.x86_64 
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">6</span> Jul <span class="m">4</span> 11:17 extra 
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">drwxr-xr-x. <span class="m">12</span> root root <span class="m">128</span> Jul <span class="m">8</span> 05:10 kernel 
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">762886</span> Jul <span class="m">8</span> 05:11 modules.alias 
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">735054</span> Jul <span class="m">8</span> 05:11 modules.alias.bin 
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">1326</span> Jul <span class="m">4</span> 11:17 modules.block 
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">6227</span> Jul <span class="m">4</span> 11:15 modules.builtin 
</span></span><span class="line"><span class="ln">10</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">8035</span> Jul <span class="m">8</span> 05:11 modules.builtin.bin 
</span></span><span class="line"><span class="ln">11</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">240071</span> Jul <span class="m">8</span> 05:11 modules.dep 
</span></span><span class="line"><span class="ln">12</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">343333</span> Jul <span class="m">8</span> 05:11 modules.dep.bin 
</span></span><span class="line"><span class="ln">13</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">361</span> Jul <span class="m">8</span> 05:11 modules.devname 
</span></span><span class="line"><span class="ln">14</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">132</span> Jul <span class="m">4</span> 11:17 modules.drm 
</span></span><span class="line"><span class="ln">15</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">110</span> Jul <span class="m">4</span> 11:17 modules.modesetting 
</span></span><span class="line"><span class="ln">16</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">1580</span> Jul <span class="m">4</span> 11:17 modules.networking 
</span></span><span class="line"><span class="ln">17</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">90643</span> Jul <span class="m">4</span> 11:15 modules.order 
</span></span><span class="line"><span class="ln">18</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">89</span> Jul <span class="m">8</span> 05:11 modules.softdep 
</span></span><span class="line"><span class="ln">19</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">350918</span> Jul <span class="m">8</span> 05:11 modules.symbols 
</span></span><span class="line"><span class="ln">20</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">432831</span> Jul <span class="m">8</span> 05:11 modules.symbols.bin 
</span></span><span class="line"><span class="ln">21</span><span class="cl">lrwxrwxrwx. <span class="m">1</span> root root <span class="m">5</span> Jul <span class="m">8</span> 05:10 <span class="nb">source</span> -&gt; build 
</span></span><span class="line"><span class="ln">22</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">6</span> Jul <span class="m">4</span> 11:17 updates 
</span></span><span class="line"><span class="ln">23</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">95</span> Jul <span class="m">8</span> 05:10 vdso 
</span></span><span class="line"><span class="ln">24</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">6</span> Jul <span class="m">4</span> 11:17 weak-updates
</span></span></code></pre></div><p>As we can see, there are several files that deals with the inter-dependencies of modules, which is used by <code>modprobe</code> to understand which modules to load before the one being actually requested to load.</p>
<p>For example:</p>
<ul>
<li><code>modules.block</code> lists the modules for block devices</li>
<li><code>modules.networking</code> lists the ones for network devices.</li>
<li><code>modules.builtin</code> lists the path of modules included in the kernel.</li>
<li><code>modules.devname</code> lists the ones that would be loaded automatically if a particular device is created.</li>
</ul>
<p>The kernel folder contains modules divided according to their use cases.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="o">[</span>root@centos7 3.10.0-514.26.2.el7.x86_64<span class="o">]</span><span class="c1"># ls -l kernel/ </span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">total <span class="m">16</span> 
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">drwxr-xr-x. <span class="m">3</span> root root <span class="m">17</span> Jul <span class="m">8</span> 05:10 arch 
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Jul <span class="m">8</span> 05:10 crypto 
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">drwxr-xr-x. <span class="m">67</span> root root <span class="m">4096</span> Jul <span class="m">8</span> 05:10 drivers 
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">drwxr-xr-x. <span class="m">26</span> root root <span class="m">4096</span> Jul <span class="m">8</span> 05:10 fs 
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">drwxr-xr-x. <span class="m">3</span> root root <span class="m">19</span> Jul <span class="m">8</span> 05:10 kernel 
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">drwxr-xr-x. <span class="m">5</span> root root <span class="m">222</span> Jul <span class="m">8</span> 05:10 lib 
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">32</span> Jul <span class="m">8</span> 05:10 mm 
</span></span><span class="line"><span class="ln">10</span><span class="cl">drwxr-xr-x. <span class="m">33</span> root root <span class="m">4096</span> Jul <span class="m">8</span> 05:10 net 
</span></span><span class="line"><span class="ln">11</span><span class="cl">drwxr-xr-x. <span class="m">11</span> root root <span class="m">156</span> Jul <span class="m">8</span> 05:10 sound 
</span></span><span class="line"><span class="ln">12</span><span class="cl">drwxr-xr-x. <span class="m">3</span> root root <span class="m">17</span> Jul <span class="m">8</span> 05:10 virt
</span></span></code></pre></div><p>Each directory within kernel contains modules depending on the area they're used for.</p>
<p>For example, <code>kernel/fs/</code> contains filesystem drivers.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="o">[</span>root@centos7 3.10.0-514.26.2.el7.x86_64<span class="o">]</span><span class="c1"># ls -l kernel/fs </span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">total <span class="m">48</span> 
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">21853</span> Jul <span class="m">4</span> 11:51 binfmt_misc.ko 
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">22</span> Jul <span class="m">8</span> 05:10 btrfs 
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">27</span> Jul <span class="m">8</span> 05:10 cachefiles 
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">21</span> Jul <span class="m">8</span> 05:10 ceph 
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">21</span> Jul <span class="m">8</span> 05:10 cifs 
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">23</span> Jul <span class="m">8</span> 05:10 cramfs 
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">20</span> Jul <span class="m">8</span> 05:10 dlm 
</span></span><span class="line"><span class="ln">10</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">23</span> Jul <span class="m">8</span> 05:10 exofs 
</span></span><span class="line"><span class="ln">11</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">21</span> Jul <span class="m">8</span> 05:10 ext4
</span></span><span class="line"><span class="ln">12</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">51</span> Jul <span class="m">8</span> 05:10 fat 
</span></span><span class="line"><span class="ln">13</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">24</span> Jul <span class="m">8</span> 05:10 fscache 
</span></span><span class="line"><span class="ln">14</span><span class="cl">rwxr-xr-x. <span class="m">2</span> root root <span class="m">36</span> Jul <span class="m">8</span> 05:10 fuse 
</span></span><span class="line"><span class="ln">15</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">21</span> Jul <span class="m">8</span> 05:10 gfs2 
</span></span><span class="line"><span class="ln">16</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">22</span> Jul <span class="m">8</span> 05:10 isofs 
</span></span><span class="line"><span class="ln">17</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">21</span> Jul <span class="m">8</span> 05:10 jbd2 
</span></span><span class="line"><span class="ln">18</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">22</span> Jul <span class="m">8</span> 05:10 lockd 
</span></span><span class="line"><span class="ln">19</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">19597</span> Jul <span class="m">4</span> 11:51 mbcache.ko 
</span></span><span class="line"><span class="ln">20</span><span class="cl">drwxr-xr-x. <span class="m">6</span> root root <span class="m">128</span> Jul <span class="m">8</span> 05:10 nfs 
</span></span><span class="line"><span class="ln">21</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">40</span> Jul <span class="m">8</span> 05:10 nfs_common 
</span></span><span class="line"><span class="ln">22</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">21</span> Jul <span class="m">8</span> 05:10 nfsd 
</span></span><span class="line"><span class="ln">23</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Jul <span class="m">8</span> 05:10 nls 
</span></span><span class="line"><span class="ln">24</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">24</span> Jul <span class="m">8</span> 05:10 overlayfs 
</span></span><span class="line"><span class="ln">25</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">24</span> Jul <span class="m">8</span> 05:10 pstore 
</span></span><span class="line"><span class="ln">26</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">25</span> Jul <span class="m">8</span> 05:10 squashfs 
</span></span><span class="line"><span class="ln">27</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">20</span> Jul <span class="m">8</span> 05:10 udf 
</span></span><span class="line"><span class="ln">28</span><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">20</span> Jul <span class="m">8</span> 05:10 xfs
</span></span></code></pre></div><h2 class="relative group">depmod, and related commands 
    <div id="depmod-and-related-commands" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#depmod-and-related-commands" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Modules can export the features it carry, called <code>symbols</code> which can be used by other modules.</p>
<p>If module <code>A</code> depends on a symbol exported by module <code>B</code>, module <code>B</code> should be loaded first followed by module <code>A</code>.</p>
<p><code>depmod</code> creates a list of symbol dependencies each module has, so that <code>modprobe</code> can go ahead and load the modules serving the symbols, prior loading the actual module.</p>
<p><code>depmod</code> works by:</p>
<ol>
<li>Creating a list of symbols each module exports.</li>
<li>Creating a list of symbol dependencies each module has.</li>
<li>Dumping the list of symbols each module exports, to <code>lib/modules/$(uname -r)/modules.symbols.bin</code> and <code>/lib/modules/$(uname -r)/modules.symbols</code></li>
<li>Dumping the module dependency information to <code>/lib/modules/$(uname -r)/modules.dep.bin</code> and <code>/lib/modules/$(uname -r)/modules.dep</code>.</li>
<li>Creating <code>/lib/modules/$(uname -r)/modules.devnames</code> which contains the device file information (device type, major:minor number) that gets created at boot for this module to function properly.</li>
</ol>
<p><strong>NOTE</strong>:</p>
<ul>
<li><code>modprobe</code> refers <code>/lib/modules/$(uname -r)/modules.dep.bin</code> to understand the dependencies each module require.</li>
<li>A human-readable version of this file is maintained at <code>/lib/modules/$(uname -r)/modules.dep</code> but <code>modprobe</code> does not refer this.</li>
<li>The binary file <code>modules.symbols.bin</code> carry the symbols exported (if any) by each module, one symbol per line.</li>
<li>A human-readable version of the same is kept at <code>modules.symbols</code>.</li>
</ul>
<p>A sneak peek into <code>modules.symbols</code> and <code>modules.dep</code>:</p>
<h3 class="relative group">modules.symbols 
    <div id="modulessymbols" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#modulessymbols" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="o">[</span>root@centos7 3.10.0-514.26.2.el7.x86_64<span class="o">]</span><span class="c1"># head modules.symbols </span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"># Aliases for symbols, used by symbol_request(). </span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="nb">alias</span> symbol:cfg80211_report_obss_beacon cfg80211 
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="nb">alias</span> symbol:drm_dp_link_train_channel_eq_delay drm_kms_helper 
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="nb">alias</span> symbol:__twofish_setkey twofish_common 
</span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="nb">alias</span> symbol:mlx4_db_free mlx4_core 
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="nb">alias</span> symbol:nf_send_unreach nf_reject_ipv4 
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="nb">alias</span> symbol:sdhci_remove_host sdhci 
</span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="nb">alias</span> symbol:videobuf_dma_init_kernel videobuf_dma_sg 
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="nb">alias</span> symbol:ar9003_paprd_is_done ath9k_hw 
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="nb">alias</span> symbol:cxgbi_ep_disconnect libcxgbi
</span></span></code></pre></div><h3 class="relative group">modules.dep 
    <div id="modulesdep" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#modulesdep" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="o">[</span>root@centos7 3.10.0-514.26.2.el7.x86_64<span class="o">]</span><span class="c1"># head modules.dep </span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">kernel/arch/x86/kernel/cpu/mcheck/mce-inject.ko: 
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">kernel/arch/x86/kernel/test_nx.ko: 
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">kernel/arch/x86/kernel/iosf_mbi.ko: 
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">kernel/arch/x86/crypto/ablk_helper.ko: 
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">kernel/crypto/cryptd.ko 
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">kernel/arch/x86/crypto/glue_helper.ko: 
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">kernel/arch/x86/crypto/camellia-x86_64.ko: 
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">kernel/crypto/xts.ko 
</span></span><span class="line"><span class="ln">10</span><span class="cl">kernel/crypto/lrw.ko 
</span></span><span class="line"><span class="ln">11</span><span class="cl">kernel/crypto/gf128mul.ko 
</span></span><span class="line"><span class="ln">12</span><span class="cl">kernel/arch/x86/crypto/glue_helper.ko 
</span></span><span class="line"><span class="ln">13</span><span class="cl">kernel/arch/x86/crypto/blowfish-x86_64.ko: 
</span></span><span class="line"><span class="ln">14</span><span class="cl">kernel/crypto/blowfish_common.ko 
</span></span><span class="line"><span class="ln">15</span><span class="cl">kernel/arch/x86/crypto/twofish-x86_64.ko: 
</span></span><span class="line"><span class="ln">16</span><span class="cl">kernel/crypto/twofish_common.ko 
</span></span><span class="line"><span class="ln">17</span><span class="cl">kernel/arch/x86/crypto/twofish-x86_64-3way.ko: 
</span></span><span class="line"><span class="ln">18</span><span class="cl">kernel/arch/x86/crypto/twofish-x86_64.ko 
</span></span><span class="line"><span class="ln">19</span><span class="cl">kernel/crypto/twofish_common.ko 
</span></span><span class="line"><span class="ln">20</span><span class="cl">kernel/crypto/xts.ko 
</span></span><span class="line"><span class="ln">21</span><span class="cl">kernel/crypto/lrw.ko 
</span></span><span class="line"><span class="ln">22</span><span class="cl">kernel/crypto/gf128mul.ko 
</span></span><span class="line"><span class="ln">23</span><span class="cl">kernel/arch/x86/crypto/glue_helper.ko 
</span></span><span class="line"><span class="ln">24</span><span class="cl">kernel/arch/x86/crypto/salsa20-x86_64.ko:
</span></span></code></pre></div><p><code>lsmod</code> is a parser that reads through <code>/proc/modules</code> and presents it in an easy-to-read format.</p>
<p>Note how <code>lsmod</code> parse throug the content of <code>/proc/modules</code> below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="o">[</span>root@centos7 3.10.0-514.26.2.el7.x86_64<span class="o">]</span><span class="c1"># head /proc/modules</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="nb">test</span> <span class="m">12498</span> <span class="m">0</span> - Live 0xffffffffa0492000 <span class="o">(</span>POE<span class="o">)</span> 
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">binfmt_misc <span class="m">17468</span> <span class="m">1</span> - Live 0xffffffffa048c000 
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">uhid <span class="m">17369</span> <span class="m">0</span> - Live 0xffffffffa0486000 
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">ipt_MASQUERADE <span class="m">12678</span> <span class="m">2</span> - Live 0xffffffffa0481000 
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">nf_nat_masquerade_ipv4 <span class="m">13412</span> <span class="m">1</span> 
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">ipt_MASQUERADE, Live 0xffffffffa0451000 
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">xt_addrtype <span class="m">12676</span> <span class="m">2</span> - Live 0xffffffffa044c000 
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">br_netfilter <span class="m">22209</span> <span class="m">0</span> - Live 0xffffffffa0468000 
</span></span><span class="line"><span class="ln">10</span><span class="cl">dm_thin_pool <span class="m">65565</span> <span class="m">1</span> - Live 0xffffffffa046f000 
</span></span><span class="line"><span class="ln">11</span><span class="cl">dm_persistent_data <span class="m">67216</span> <span class="m">1</span> 
</span></span><span class="line"><span class="ln">12</span><span class="cl">dm_thin_pool, Live 0xffffffffa0456000 
</span></span><span class="line"><span class="ln">13</span><span class="cl">dm_bio_prison <span class="m">15907</span> <span class="m">1</span> 
</span></span><span class="line"><span class="ln">14</span><span class="cl">dm_thin_pool, Live 0xffffffffa043f000
</span></span><span class="line"><span class="ln">15</span><span class="cl">
</span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="o">[</span>root@centos7 3.10.0-514.26.2.el7.x86_64<span class="o">]</span><span class="c1"># lsmod | head </span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">Module Size Used by 
</span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="nb">test</span> <span class="m">12498</span> <span class="m">0</span> 
</span></span><span class="line"><span class="ln">19</span><span class="cl">binfmt_misc <span class="m">17468</span> <span class="m">1</span> 
</span></span><span class="line"><span class="ln">20</span><span class="cl">uhid <span class="m">17369</span> <span class="m">0</span> 
</span></span><span class="line"><span class="ln">21</span><span class="cl">ipt_MASQUERADE <span class="m">12678</span> <span class="m">2</span> 
</span></span><span class="line"><span class="ln">22</span><span class="cl">nf_nat_masquerade_ipv4 <span class="m">13412</span> <span class="m">1</span> 
</span></span><span class="line"><span class="ln">23</span><span class="cl">ipt_MASQUERADE xt_addrtype <span class="m">12676</span> <span class="m">2</span> 
</span></span><span class="line"><span class="ln">24</span><span class="cl">br_netfilter <span class="m">22209</span> <span class="m">0</span> 
</span></span><span class="line"><span class="ln">25</span><span class="cl">dm_thin_pool <span class="m">65565</span> <span class="m">1</span> 
</span></span><span class="line"><span class="ln">26</span><span class="cl">dm_persistent_data <span class="m">67216</span> <span class="m">1</span> dm_thin_pool
</span></span></code></pre></div><p><strong>NOTE:</strong></p>
<ol>
<li>The first field lists the module name.</li>
<li>The second field lists the size of the module in memory.</li>
<li>The third field lists the number of times the module is in use. `0` means the module is not used despite it being loaded.</li>
<li>The fourth field lists the modules which uses this module as their dependency.</li>
</ol>
<h2 class="relative group">Creating a dummy module 
    <div id="creating-a-dummy-module" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#creating-a-dummy-module" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>The steps for creating a kernel module includes:</p>
<ol>
<li>Writing the module file.</li>
<li>Writing the <code>Makefile</code> for the module.</li>
<li>Compile the module file using <code>make</code> , which will refer the <code>Makefile</code> to build it.</li>
</ol>
<p>The module file and its corresponding <code>Makefile</code> are put in a separate directory so as to keep the kernel module directory clean.
Once the module code and the Makefile are ready, the <code>make</code> command is used to build the module, <code>$(PWD)</code> being the directory with the module code and Makefile.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl"><span class="c1"># make -C /lib/modules/$(uname -r)/build M=$PWD modules</span>
</span></span></code></pre></div><p>The <code>make</code> command above does the following:</p>
<ol>
<li>Change to the path mentioned after <code>-C</code>, ie.. to the location where the kernel Makefile is present. (<code>/lib/modules/$(uname -r)/build/</code>)</li>
<li>Use the kernel Makefile's macro <code>M</code> which denotes the location from which the code should be compiled, ie.. in this case, the PWD where the module code/Makefile is present.</li>
<li>Use the target <code>modules</code> which tells <code>make</code> to build the module.</li>
</ol>
<p><code>make</code> is trying to build a module in the current working directory, using the kernel Makefile at <code>/lib/modules/$(uname -r)/build/Makefile</code></p>
<p>If we have a module file named <code>test.c</code> and its corresponding Makefile in <code>$(PWD)</code>, the <code>make</code> command would follow the steps below:</p>
<ol>
<li><code>make</code> calls the <code>modules</code> target and refers to the kernel <code>Makefile</code>.</li>
<li>The kernel Makefile looks for the module Makefile in $PWD.</li>
<li>The kernel Makefile read the module's Makefile and gets a list of the objects assigned to the macro <code>obj-m</code>.</li>
<li>The <code>make</code> command builds modules for each object assigned to the macro <code>obj-m</code>.</li>
</ol>
<h2 class="relative group">Writing a simple module 
    <div id="writing-a-simple-module" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#writing-a-simple-module" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>The following is a very simple module, which prints a message while loading, and another one while unloading.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kt">int</span> <span class="nf">test_module</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">  <span class="nf">printk</span><span class="p">(</span><span class="s">&#34;Loading the test module!</span><span class="se">\\</span><span class="s">n&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="kt">void</span> <span class="nf">unload_test</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">  <span class="nf">printk</span><span class="p">(</span><span class="s">&#34;Unloading the test module!</span><span class="se">\\</span><span class="s">n&#34;</span><span class="p">);</span> 
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">
</span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="nf">module_init</span><span class="p">(</span><span class="n">test_module</span><span class="p">)</span> 
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="nf">module_exit</span><span class="p">(</span><span class="n">unload_test</span><span class="p">)</span>
</span></span></code></pre></div><p>This has two functions, <code>test_module()</code> and <code>unload_test()</code> which simply prints a text banner upon loading and unloading respectively.</p>
<p><code>module_init()</code> is used to load the module, and can call whatever functions that needs to initialize the module.
We load our <code>test_module()</code> function into <code>module_init()</code> so that it gets initialized when the module is loaded.</p>
<p><code>module_exit()</code> is called whenever the module has to be unloaded, and it can take in whatever functions are required to do a proper cleanup (if required) prior the module being unloaded.
We load our <code>unload_test()</code> function in <code>module_exit()</code>.</p>
<h2 class="relative group">Writing a Makefile 
    <div id="writing-a-makefile" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#writing-a-makefile" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Since the kernel Makefile will look in for the <code>obj-m</code> macro in the module Makefile with the object filename as its argument, add the following in the Makefile:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">obj-m :<span class="o">=</span> test.o
</span></span></code></pre></div><p><code>make</code> will create an object file <code>test.o</code> from <code>test.c</code>, and then create a kernel object file <code>test.ko</code>.</p>
<h2 class="relative group">Compiling the module with <code>make</code> 
    <div id="compiling-the-module-with-make" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#compiling-the-module-with-make" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Let's compile the module</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="o">[</span>root@centos7 test<span class="o">]</span><span class="c1"># pwd </span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">/lib/modules/3.10.0-514.26.2.el7.x86_64/test 
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="o">[</span>root@centos7 test<span class="o">]</span><span class="c1"># ls </span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">Makefile test.c 
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="o">[</span>root@centos7 test<span class="o">]</span><span class="c1"># make -C /lib/modules/$(uname -r)/build M=$PWD modules </span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">make: Entering directory <span class="sb">`</span>/usr/src/kernels/3.10.0-514.26.2.el7.x86_64<span class="s1">&#39; 
</span></span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="s1">CC \[M\] /lib/modules/3.10.0-514.26.2.el7.x86_64/test/test.o Building modules, stage 2. MODPOST 1 modules 
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="s1">CC /lib/modules/3.10.0-514.26.2.el7.x86_64/test/test.mod.o 
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="s1">LD \[M\] /lib/modules/3.10.0-514.26.2.el7.x86_64/test/test.ko 
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="s1">make: Leaving directory \`/usr/src/kernels/3.10.0-514.26.2.el7.x86_64&#39;</span>
</span></span></code></pre></div><p>Listing the contents show lot of new files, including the module code, the Makefile, the object file <code>test.o</code> created from <code>test.c</code>, the kernel object file <code>test.ko</code>.</p>
<p><code>test.mod.c</code> contains code which should be the one ultimately being built to <code>test.ko</code>, but that should be for another post since much more is yet to be read/learned on what's happening there.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="o">[</span>root@centos7 test<span class="o">]</span><span class="c1"># ls -l </span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">total <span class="m">292</span> 
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">16</span> Jul <span class="m">27</span> 11:52 Makefile 
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">60</span> Jul <span class="m">27</span> 11:57 modules.order 
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">0</span> Jul <span class="m">27</span> 11:57 Module.symvers 
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">281</span> Jul <span class="m">27</span> 11:53 test.c 
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">137768</span> Jul <span class="m">27</span> 11:57 test.ko 
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">787</span> Jul <span class="m">27</span> 11:57 test.mod.c 
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">52912</span> Jul <span class="m">27</span> 11:57 test.mod.o 
</span></span><span class="line"><span class="ln">10</span><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">87776</span> Jul <span class="m">27</span> 11:57 test.o
</span></span></code></pre></div><h2 class="relative group">Loading/Unloading the module 
    <div id="loadingunloading-the-module" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#loadingunloading-the-module" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Loading and unloading the module should print the messages passed via <code>printk</code> in <code>dmesg</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl"><span class="o">[</span>root@centos7 test<span class="o">]</span><span class="c1"># insmod ./test.ko </span>
</span></span><span class="line"><span class="ln">2</span><span class="cl">
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="o">[</span>root@centos7 test<span class="o">]</span><span class="c1"># lsmod | grep test </span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="nb">test</span> <span class="m">12498</span> <span class="m">0</span> 
</span></span><span class="line"><span class="ln">5</span><span class="cl">
</span></span><span class="line"><span class="ln">6</span><span class="cl"><span class="o">[</span>root@centos7 test<span class="o">]</span><span class="c1"># rmmod test</span>
</span></span></code></pre></div><p>Checking <code>dmesg</code> shows the informational messages in the module code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl"><span class="o">[</span>root@centos7 test<span class="o">]</span><span class="c1"># dmesg | tail </span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="o">[</span>35889.187282<span class="o">]</span> test: loading out-of-tree module taints kernel. 
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="o">[</span>35889.187288<span class="o">]</span> test: module license <span class="s1">&#39;unspecified&#39;</span> taints kernel. 
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="o">[</span>35889.187290<span class="o">]</span> Disabling lock debugging due to kernel taint 
</span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="o">[</span>35889.187338<span class="o">]</span> test: module verification failed: signature and/or required key missing - tainting kernel 
</span></span><span class="line"><span class="ln">6</span><span class="cl"><span class="o">[</span>35889.187548<span class="o">]</span> Loading the <span class="nb">test</span> module! 
</span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="o">[</span>35899.216954<span class="o">]</span> Unloading the <span class="nb">test</span> module!
</span></span></code></pre></div><p>Note the messages about the module <code>test</code> tainting the kernel.</p>
<p>Read more on how a module can taint the kernel, at <a href="https://www.kernel.org/doc/html/latest/admin-guide/tainted-kernels.html"   target="_blank">
    https://www.kernel.org/doc/html/latest/admin-guide/tainted-kernels.html.</a></p>
<p>More on customizing the <code>Makefile</code> in another post.</p>
        </div>
                
        

        

          
      </div>
     
     <script>
        var oid = "views_posts\/2017\/07\/writing-a-minimalistic-kernel-module.md"
        var oid_likes = "likes_posts\/2017\/07\/writing-a-minimalistic-kernel-module.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js" integrity="sha512-DkmXO0rQo4LHxgEti/&#43;CJjFmQtqrxPiiBHe9CGdPPabi&#43;pk7wgrU9R58W7aOb5E6IHp8T&#43;N&#43;oOe4BolK/OCmTg=="></script>
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/posts/2017/06/recursion-algorithm-study/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Recursion - Algorithm Study</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2017-06-27 00:00:00 &#43;0000 UTC">27 June 2017</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/posts/2017/08/callables-in-python/callables-in-python/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Callables in Python</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2017-08-09 00:00:00 &#43;0000 UTC">9 August 2017</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2023
      Vimal A R
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.35c1113bcc16c5a59bf031082f9e63822aa95280423881a7847a7ff33a16e6299ce6a840d9ef4e10d947e030a18f3f20359afb2ec0f35967484b9a9360ac3145.js" integrity="sha512-NcERO8wWxaWb8DEIL55jgiqpUoBCOIGnhHp/8zoW5imc5qhA2e9OENlH4DChjz8gNZr7LsDzWWdIS5qTYKwxRQ=="></script>
  
  
</footer><div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="https://arvimal.github.io/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
