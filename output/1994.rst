How to fetch journal stats of a Ceph OSD?
#########################################
:date: 2016-11-17 21:03
:author: arvimal
:slug: 1994
:status: draft

**C**\ eph suggests using journals (preferably SSDs) so that the client can dump the data onto the primary OSD j

 

 

| $ sudo ceph --admin-daemon /var/run/ceph/ceph-osd.1.asok perf dump \| grep journal
| "journal_queue_ops": 0,
| "journal_queue_bytes": 0,
| "journal_ops": 0,
| "journal_bytes": 0,
| "journal_latency": {
| "journal_wr": 5,
| "journal_wr_bytes": {
| "journal_full": 0,

 

journal_full is the counter on how many times the journal hit full.

journal_bytes refer to the current journal usage.

| <hklein> the perf schema says it is a counter, but in code it seems to get incremented and decremented
| <hklein> it's incremented in FileJournal::read_entry() with "amount_to_take"
| <hklein> also incremented in ::submit_entry()

https://access.redhat.com/solutions/2771951

 
