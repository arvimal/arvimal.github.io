<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>arvimal.blog - Ceph</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">arvimal.blog </a></h1>
                <nav><ul>
                    <li class="active"><a href="/category/ceph.html">Ceph</a></li>
                    <li><a href="/category/ceph-programming-python.html">Ceph, Programming, Python</a></li>
                    <li><a href="/category/data-structures-and-algorithms-programming.html">Data Structures and Algorithms, Programming</a></li>
                    <li><a href="/category/data-structures-and-algorithms-programming-python.html">Data Structures and Algorithms, Programming, Python</a></li>
                    <li><a href="/category/linux-programming.html">Linux, Programming</a></li>
                    <li><a href="/category/misc.html">Misc</a></li>
                    <li><a href="/category/programming.html">Programming</a></li>
                    <li><a href="/category/programming-python.html">Programming, Python</a></li>
                    <li><a href="/category/techno.html">Techno</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/sharding-the-ceph-rados-gateway-bucket-index.html">Sharding the Ceph RADOS Gateway bucket index</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-06-30T15:25:00+02:00">
                Published: Thu 30 June 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>
<p>tags: <a href="/tag/ceph.html">ceph</a> <a href="/tag/rados.html">rados</a> <a href="/tag/rados-gateway.html">Rados Gateway</a> <a href="/tag/rgw.html">RGW</a> <a href="/tag/rgw-index.html">rgw index</a> <a href="/tag/sharding.html">sharding</a> </p>
</footer><!-- /.post-info --><p><strong>S</strong>harding is the process of breaking down data onto multiple locations so as to increase parallelism, as well as distribute load. This is a common feature used in databases. Read more on this at&nbsp;<a class="reference external" href="https://en.wikipedia.org/wiki/Shard_(database_architecture)">Wikipedia</a>.</p>
<p>The concept of sharding is used in Ceph, for splitting the bucket index in a RADOS&nbsp;Gateway.</p>
<p>RGW or RADOS&nbsp;Gateway keeps an index for all the objects in its buckets for faster and easier lookup.&nbsp;For each RGW bucket created in a pool, the corresponding index is created in the <tt class="docutils literal">XX.index</tt>&nbsp;pool.</p>
<p>For example, for each of the buckets created in <tt class="docutils literal">.rgw</tt>&nbsp;pool, the bucket index is created in <tt class="docutils literal">.rgw.buckets.index</tt>&nbsp;pool. For each bucket, the index is stored in a single RADOS object.</p>
<p>When the number of objects increases, the size of the RADOS object increases as well. Two problems arise due to the increased index size.</p>
<ol class="arabic simple">
<li>RADOS does not work good with large objects since it's not designed as such. Operations such as recovery, scrubbing etc.. work on a single object. If the object size increases, OSDs may start hitting timeouts because reading a large object may take a long time. This is one of the reason that all RADOS client interfaces such as RBD, RGW, CephFS use a standard 4MB object size.</li>
<li>Since the index is stored in a single RADOS object, only a single operation can be done on it at any given time. When the number of objects increases, the index stored in the RADOS object grows. Since a single index is handling a large number of objects, and there is a chance the number of operations also increase, parallelism is not possible which can end up being a bottleneck. Multiple operations will need to wait in a queue since a single operation is possible at a time.</li>
</ol>
<p>In order to work around these problems, the bucket index is sharded into multiple parts. Each shard is kept on a separate RADOS object within the index pool.</p>
<p>Sharding is configured with the tunable <tt class="docutils literal">bucket_index_max_shards</tt>&nbsp;.&nbsp;By default, this tunable is set to <tt class="docutils literal">0</tt>&nbsp;which means that there are no shards.</p>
<div class="section" id="how-to-check-if-sharding-is-set">
<h2>How to check if Sharding is set?</h2>
<ol class="arabic">
<li><p class="first">List the buckets
[code language=&quot;bash&quot;]
# radosgw-admin metadata bucket list
[
&quot;my-new-bucket&quot;
]
[/code]</p>
</li>
<li><p class="first">Get information on the bucket in question[code language=&quot;bash&quot;]</p>
<div class="line-block">
<div class="line"># radosgw-admin metadata get bucket:my-new-bucket</div>
<div class="line">{</div>
<div class="line">&quot;key&quot;: &quot;bucket:my-new-bucket&quot;,</div>
<div class="line">&quot;ver&quot;: {</div>
<div class="line">&quot;tag&quot;: &quot;_bGZAVUgayKVwGNgNvI0328G&quot;,</div>
<div class="line">&quot;ver&quot;: 1</div>
<div class="line">},</div>
<div class="line">&quot;mtime&quot;: 1458940225,</div>
<div class="line">&quot;data&quot;: {</div>
<div class="line">&quot;bucket&quot;: {</div>
<div class="line">&quot;name&quot;: &quot;my-new-bucket&quot;,</div>
<div class="line">&quot;pool&quot;: &quot;.rgw.buckets&quot;,</div>
<div class="line">&quot;data_extra_pool&quot;: &quot;.rgw.buckets.extra&quot;,</div>
<div class="line">&quot;index_pool&quot;: &quot;.rgw.buckets.index&quot;,</div>
<div class="line">&quot;marker&quot;: &quot;default.2670570.1&quot;,</div>
<div class="line">&quot;bucket_id&quot;: &quot;default.2670570.1&quot;</div>
<div class="line">},</div>
<div class="line">&quot;owner&quot;: &quot;rgw_user&quot;,</div>
<div class="line">&quot;creation_time&quot;: 1458940225,</div>
<div class="line">&quot;linked&quot;: &quot;true&quot;,</div>
<div class="line">&quot;has_bucket_info&quot;: &quot;false&quot;</div>
<div class="line">}</div>
<div class="line">}</div>
</div>
<p>[/code]</p>
</li>
<li><p class="first">Use the bucket ID to get more information, including the number of shards.</p>
</li>
</ol>
<div class="line-block">
<div class="line">[code language=&quot;bash&quot;]</div>
<div class="line">radosgw-admin metadata get bucket.instance:my-new-bucket:default.2670570.1</div>
<div class="line">{</div>
<div class="line">&quot;key&quot;: &quot;bucket.instance:my-new-bucket:default.2670570.1&quot;,</div>
<div class="line">&quot;ver&quot;: {</div>
<div class="line">&quot;tag&quot;: &quot;_xILkVKbfQD7reDFSOB4a5VU&quot;,</div>
<div class="line">&quot;ver&quot;: 1</div>
<div class="line">},</div>
<div class="line">&quot;mtime&quot;: 1458940225,</div>
<div class="line">&quot;data&quot;: {</div>
<div class="line">&quot;bucket_info&quot;: {</div>
<div class="line">&quot;bucket&quot;: {</div>
<div class="line">&quot;name&quot;: &quot;my-new-bucket&quot;,</div>
<div class="line">&quot;pool&quot;: &quot;.rgw.buckets&quot;,</div>
<div class="line">&quot;data_extra_pool&quot;: &quot;.rgw.buckets.extra&quot;,</div>
<div class="line">&quot;index_pool&quot;: &quot;.rgw.buckets.index&quot;,</div>
<div class="line">&quot;marker&quot;: &quot;default.2670570.1&quot;,</div>
<div class="line">&quot;bucket_id&quot;: &quot;default.2670570.1&quot;</div>
<div class="line">},</div>
<div class="line">&quot;creation_time&quot;: 1458940225,</div>
<div class="line">&quot;owner&quot;: &quot;rgw_user&quot;,</div>
<div class="line">&quot;flags&quot;: 0,</div>
<div class="line">&quot;region&quot;: &quot;default&quot;,</div>
<div class="line">&quot;placement_rule&quot;: &quot;default-placement&quot;,</div>
<div class="line">&quot;has_instance_obj&quot;: &quot;true&quot;,</div>
<div class="line">&quot;quota&quot;: {</div>
<div class="line">&quot;enabled&quot;: false,</div>
<div class="line">&quot;max_size_kb&quot;: -1,</div>
<div class="line">&quot;max_objects&quot;: -1</div>
<div class="line">},</div>
<div class="line">&quot;num_shards&quot;: 0,</div>
<div class="line">&quot;bi_shard_hash_type&quot;: 0</div>
<div class="line">},</div>
<div class="line">&quot;attrs&quot;: [</div>
<div class="line">{</div>
<div class="line">&quot;key&quot;: &quot;user.rgw.acl&quot;,</div>
<div class="line">&quot;val&quot;: &quot;AgKPAAAAAgIaAAAACAAAAHJnd191c2VyCgAAAEZpcnN0IFVzZXIDA2kAAAABAQAAAAgAAAByZ3dfdXNlcg8AAAABAAAACAAAAHJnd191c2VyAwM6AAAAAgIEAAAAAAAAAAgAAAByZ3dfdXNlcgAAAAAAAAAAAgIEAAAADwAAAAoAAABGaXJzdCBVc2VyAAAAAAAAAAA=&quot;</div>
<div class="line">},</div>
<div class="line">{</div>
<div class="line">&quot;key&quot;: &quot;user.rgw.idtag&quot;,</div>
<div class="line">&quot;val&quot;: &quot;&quot;</div>
<div class="line">},</div>
<div class="line">{</div>
<div class="line">&quot;key&quot;: &quot;user.rgw.manifest&quot;,</div>
<div class="line">&quot;val&quot;: &quot;&quot;</div>
<div class="line">}</div>
<div class="line">]</div>
<div class="line">}</div>
<div class="line">}</div>
</div>
<div class="line-block">
<div class="line">[/code]</div>
<div class="line">Note that `num_shards` is set to 0, which means that sharding is not enabled.</div>
</div>
</div>
<div class="section" id="how-to-configure-sharding">
<h2>How to configure Sharding?</h2>
<p>To configure sharding, we need to first dump the region info.</p>
<p><strong>NOTE:</strong> By default, RGW has a region named <tt class="docutils literal">default</tt>&nbsp;even if regions are not configured.</p>
<div class="line-block">
<div class="line">[code language=&quot;bash&quot;]</div>
<div class="line"># radosgw-admin region get &gt; /tmp/region.txt</div>
</div>
<div class="line-block">
<div class="line"># cat /tmp/region.txt</div>
<div class="line">{</div>
<div class="line">&quot;name&quot;: &quot;default&quot;,</div>
<div class="line">&quot;api_name&quot;: &quot;&quot;,</div>
<div class="line">&quot;is_master&quot;: &quot;true&quot;,</div>
<div class="line">&quot;endpoints&quot;: [],</div>
<div class="line">&quot;hostnames&quot;: [],</div>
<div class="line">&quot;master_zone&quot;: &quot;&quot;,</div>
<div class="line">&quot;zones&quot;: [</div>
<div class="line">{</div>
<div class="line">&quot;name&quot;: &quot;default&quot;,</div>
<div class="line">&quot;endpoints&quot;: [],</div>
<div class="line">&quot;log_meta&quot;: &quot;false&quot;,</div>
<div class="line">&quot;log_data&quot;: &quot;false&quot;,</div>
<div class="line">&quot;bucket_index_max_shards&quot;: 0</div>
<div class="line">}</div>
<div class="line">],</div>
<div class="line">&quot;placement_targets&quot;: [</div>
<div class="line">{</div>
<div class="line">&quot;name&quot;: &quot;default-placement&quot;,</div>
<div class="line">&quot;tags&quot;: []</div>
<div class="line">}</div>
<div class="line">],</div>
<div class="line">&quot;default_placement&quot;: &quot;default-placement&quot;</div>
<div class="line">}</div>
</div>
<div class="line-block">
<div class="line">[/code]</div>
<div class="line">Edit the file /tmp/region.txt, change the value for `bucket_index_max_shards` to the needed shard value (we're setting it to 8 in this example), and inject it back to the region.</div>
</div>
<div class="line-block">
<div class="line">[code language=&quot;bash&quot;]</div>
<div class="line"># radosgw-admin region set &lt; /tmp/region.txt</div>
<div class="line">{</div>
<div class="line">&quot;name&quot;: &quot;default&quot;,</div>
<div class="line">&quot;api_name&quot;: &quot;&quot;,</div>
<div class="line">&quot;is_master&quot;: &quot;true&quot;,</div>
<div class="line">&quot;endpoints&quot;: [],</div>
<div class="line">&quot;hostnames&quot;: [],</div>
<div class="line">&quot;master_zone&quot;: &quot;&quot;,</div>
<div class="line">&quot;zones&quot;: [</div>
<div class="line">{</div>
<div class="line">&quot;name&quot;: &quot;default&quot;,</div>
<div class="line">&quot;endpoints&quot;: [],</div>
<div class="line">&quot;log_meta&quot;: &quot;false&quot;,</div>
<div class="line">&quot;log_data&quot;: &quot;false&quot;,</div>
<div class="line">&quot;bucket_index_max_shards&quot;: 8</div>
<div class="line">}</div>
<div class="line">],</div>
<div class="line">&quot;placement_targets&quot;: [</div>
<div class="line">{</div>
<div class="line">&quot;name&quot;: &quot;default-placement&quot;,</div>
<div class="line">&quot;tags&quot;: []</div>
<div class="line">}</div>
<div class="line">],</div>
<div class="line">&quot;default_placement&quot;: &quot;default-placement&quot;</div>
<div class="line">}</div>
<div class="line">[/code]</div>
<div class="line">Reference:</div>
</div>
<ol class="arabic simple">
<li><a class="reference external" href="https://access.redhat.com/documentation/en/red-hat-ceph-storage/version-1.3/red-hat-ceph-storage-13-ceph-object-gateway-for-rhel-x86-64/#configure-bucket-sharding">Red Hat Ceph Storage 1.3 Rados Gateway documentation</a></li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Shard_(database_architecture">https://en.wikipedia.org/wiki/Shard_(database_architecture</a>)</li>
</ol>
</div>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/ceph-osd-heartbeats.html" rel="bookmark"
                           title="Permalink to Ceph OSD heartbeats">Ceph OSD heartbeats</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-05-09T19:10:00+02:00">
                Published: Mon 09 May 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>
<p>tags: <a href="/tag/ceph.html">ceph</a> <a href="/tag/monitors.html">monitors</a> </p>
</footer><!-- /.post-info -->                <p>Ceph OSD daemons need to ensure that the neighbouring OSDs are functioning properly so that the cluster remains in a healthy state.</p>
<p>For this, each Ceph OSD process (ceph-osd) sends a heartbeat signal to the neighbouring OSDs. By default, the heartbeat signal is sent every 6 seconds [1], which is …</p>
                <a class="readmore" href="/ceph-osd-heartbeats.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how-to-get-a-ceph-monosd-map-at-a-specific-epoch.html" rel="bookmark"
                           title="Permalink to How to get a Ceph MON/OSD map at a specific epoch?">How to get a Ceph MON/OSD map at a specific epoch?</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-05-08T11:12:00+02:00">
                Published: Sun 08 May 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>

</footer><!-- /.post-info -->                <p>To get a MON map or an OSD map of a specific epoch, use:</p>
<blockquote>
<div class="line-block">
<div class="line"># ceph osd getmap &lt;epoch-value&gt;</div>
<div class="line"># ceph mon getmap &lt;epoch-value&gt;</div>
</div>
</blockquote>
<p>The map can be forwarded to a file as following:</p>
<blockquote>
# ceph osd getmap &lt;epoch-value&gt; -o /tmp/ceph_osd_getmap.bin</blockquote>
<p>This would be in a binary format, and hence will …</p>
                <a class="readmore" href="/how-to-get-a-ceph-monosd-map-at-a-specific-epoch.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/list-all-ceph-pools-with-rbd-images-and-snapshots.html" rel="bookmark"
                           title="Permalink to List RBD images, snapshots, and clones in Ceph pools">List RBD images, snapshots, and clones in Ceph pools</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-10-15T11:52:00+02:00">
                Published: Thu 15 October 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>

</footer><!-- /.post-info -->                <p>This is a crude bash one-liner I did to get the details of all the RBD images, as well as the information on snapshots and clones created from them.</p>
<div class="line-block">
<div class="line">[code language=&quot;bash&quot;]</div>
<div class="line"># for pool in `rados lspools`;</div>
<div class="line">do echo &quot;POOL :&quot; $pool;</div>
<div class="line">rbd ls -l $pool;</div>
<div class="line">echo &quot;-----&quot;;</div>
<div class="line">done</div>
<div class="line">[/code]</div>
</div>
<p>This will …</p>
                <a class="readmore" href="/list-all-ceph-pools-with-rbd-images-and-snapshots.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/why-do-objects-get-marked-as-unfound-in-a-a-ceph-cluster.html" rel="bookmark"
                           title="Permalink to Ceph and unfound objects">Ceph and unfound objects</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-10-07T22:11:00+02:00">
                Published: Wed 07 October 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>

</footer><!-- /.post-info -->                <p>In certain cases, a Ceph cluster may move away from an HEALTHY state due to “<strong>unfound</strong>” objects.</p>
<p>A “<strong>ceph -s</strong>” should show if you have any unfound objects. So, what are unfound objects? How does an object become “<strong>unfound</strong>”? This article tries to explain why/how “<strong>unfound</strong>” objects come into …</p>
                <a class="readmore" href="/why-do-objects-get-marked-as-unfound-in-a-a-ceph-cluster.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/objects-remain-in-a-ceph-pool-used-for-rbd-even-if-the-files-are-deleted-from-the-mount-point.html" rel="bookmark"
                           title="Permalink to Ceph Rados Block Device (RBD) and TRIM">Ceph Rados Block Device (RBD) and TRIM</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-10-07T14:36:00+02:00">
                Published: Wed 07 October 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>
<p>tags: <a href="/tag/ceph.html">ceph</a> <a href="/tag/discard.html">discard</a> <a href="/tag/fstrim.html">fstrim</a> <a href="/tag/objects.html">objects</a> <a href="/tag/rados.html">rados</a> <a href="/tag/rados-block-device.html">rados block device</a> <a href="/tag/rbd.html">rbd</a> <a href="/tag/trim.html">trim</a> </p>
</footer><!-- /.post-info -->                <p>I recently came across a scenario where the objects in a RADOS pool used for an RBD block device doesn’t get removed, even if the files created through the mount point were removed.</p>
<p>I had an RBD image from an RHCS1.3 cluster mapped to a RHEL7.1 client …</p>
                <a class="readmore" href="/objects-remain-in-a-ceph-pool-used-for-rbd-even-if-the-files-are-deleted-from-the-mount-point.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how-to-find-the-crush-ruleset-on-which-a-pool-was-created.html" rel="bookmark"
                           title="Permalink to Custom CRUSH rulesets and pools">Custom CRUSH rulesets and pools</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-09-23T19:45:00+02:00">
                Published: Wed 23 September 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>

</footer><!-- /.post-info -->                <p>Ceph supports custom rulesets via <a class="reference external" href="http://ceph.com/papers/weil-crush-sc06.pdf">CRUSH</a>, which can be used to sort hardware based on various features such as speed and other factors, set custom weights, and do a lot of other useful things.</p>
<p>Pools, or the buckets were the data is written to, can be created on the custom …</p>
                <a class="readmore" href="/how-to-find-the-crush-ruleset-on-which-a-pool-was-created.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how-to-get-a-listing-of-the-osd-nodes-in-an-easily-scriptable-format.html" rel="bookmark"
                           title="Permalink to OSD information in a scriptable format">OSD information in a scriptable format</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-09-18T19:05:00+02:00">
                Published: Fri 18 September 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>
<p>tags: <a href="/tag/ceph.html">ceph</a> <a href="/tag/osd.html">osd</a> </p>
</footer><!-- /.post-info -->                <p>In case you are trying to get the OSD ID and the corresponding node IP address mappings in a script-able format, use the following command:</p>
<blockquote>
# ceph osd find &lt;OSD-num&gt;</blockquote>
<p>This will print the OSD number, the IP address, the host name, and the default root in the CRUSH map, as …</p>
                <a class="readmore" href="/how-to-get-a-listing-of-the-osd-nodes-in-an-easily-scriptable-format.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how-to-extract-view-change-and-inject-a-monitor-map-in-a-ceph-cluster.html" rel="bookmark"
                           title="Permalink to Monitor maps, how to edit them?">Monitor maps, how to edit them?</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-09-01T12:54:00+02:00">
                Published: Tue 01 September 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>
<p>tags: <a href="/tag/ceph.html">ceph</a> <a href="/tag/monitors.html">monitors</a> <a href="/tag/monmaptool.html">monmaptool</a> </p>
</footer><!-- /.post-info -->                <p>The <strong>MON map</strong> is used by the monitors in a Ceph cluster, where they keep track of various attributes relevant to the working of the cluster.</p>
<p>Similar to the <a class="reference external" href="http://ceph.com/papers/weil-crush-sc06.pdf">CRUSH</a>&nbsp;map, a monitor map can be pulled out of the cluster, inspected, changed, and injected back to the monitors, manually …</p>
                <a class="readmore" href="/how-to-extract-view-change-and-inject-a-monitor-map-in-a-ceph-cluster.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/how-can-we-map-a-pg-to-a-pool.html" rel="bookmark"
                           title="Permalink to Mapping Placement Groups and Pools">Mapping Placement Groups and Pools</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-08-17T19:17:00+02:00">
                Published: Mon 17 August 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arvimal.html">arvimal</a>
        </address>
<p>In <a href="/category/ceph.html">Ceph</a>.</p>
<p>tags: <a href="/tag/ceph.html">ceph</a> <a href="/tag/placement-groups.html">placement groups</a> <a href="/tag/pool.html">pool</a> </p>
</footer><!-- /.post-info -->                <p>Understanding the mapping of Pools and Placement Groups can be very useful while troubleshooting Ceph problems.</p>
<p>A direct method is to dump information on the PGs via :</p>
<blockquote>
# ceph pg dump</blockquote>
<p>This command should output something like the following:</p>
<blockquote>
<div class="line-block">
<div class="line">pg_stat&nbsp;&nbsp;&nbsp; objects&nbsp;&nbsp;&nbsp; mip&nbsp;&nbsp;&nbsp; degr&nbsp;&nbsp;&nbsp; unf&nbsp;&nbsp;&nbsp; bytes&nbsp;&nbsp;&nbsp; log&nbsp;&nbsp;&nbsp; disklog &nbsp; state</div>
<div class="line">5.7a &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 …</div></div></blockquote>
                <a class="readmore" href="/how-can-we-map-a-pg-to-a-pool.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 2
        <a href="/category/ceph2.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>