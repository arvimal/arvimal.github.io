<!DOCTYPE html>
<html lang="en">
<head>
          <title>arvimal.github.io - "Mapping Placement Groups and Pools"</title>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <link href="https://arvimal.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="arvimal.github.io Full Atom Feed" />
        <link href="https://arvimal.github.io/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate" title="arvimal.github.io Categories Atom Feed" />





</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://arvimal.github.io/">arvimal.github.io</a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/archives.html">Archives</a></li>
            <li><a href="/categories.html">Categories</a></li>
            <li><a href="/tags.html">Tags</a></li>
            <li class="active"><a href="https://arvimal.github.io/category/misc.html">misc</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://arvimal.github.io/mapping-placement-groups-and-pools.html" rel="bookmark"
         title="Permalink to "Mapping Placement Groups and Pools"">"Mapping Placement Groups and Pools"</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2015-08-17T00:00:00+02:00">
      August 17, 2015
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://arvimal.github.io/author/vimal-ar.html">Vimal A.R</a>
    </address>
    <div class="category">
        Category: <a href="https://arvimal.github.io/category/misc.html">misc</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <ul>
<li>"ceph"
tags:</li>
<li>"ceph"</li>
<li>"placement-groups"</li>
<li>"pool"</li>
</ul>
<hr>
<p>Understanding the mapping of Pools and Placement Groups can be very useful while troubleshooting Ceph problems.</p>
<p>A direct method is to dump information on the PGs via :</p>
<blockquote>
<p># ceph pg dump</p>
</blockquote>
<p>This command should output something like the following:</p>
<blockquote>
<p>pg_stat    objects    mip    degr    unf    bytes    log    disklog   state 5.7a           0                0         0          0        0            0       0            active+clean</p>
</blockquote>
<p>The output will have more information, and I've omitted it for the sake of explanation.</p>
<p>The first field is the PG ID, which are two values separated by a single dot (.). The left side value is the POOL ID, while the right side value is the actual PG number. It means that a specific PG can only be present under a specific pool, ie.. no PGs can be shared across pools. But please note that OSDs can be shared across multiple PGs.</p>
<p>To get the pools and associated numbers, use:</p>
<blockquote>
<p># ceph osd lspools</p>
<p>0 data,1 metadata,2 rbd,5 ssdtest,6 ec_pool,</p>
</blockquote>
<p>So, the PG 5.7a belongs to the pool numbered '5', ie.. 'ssdtest', and the PG number is '7a'.</p>
<p>The output of 'ceph pg dump' also shows various important informations such as the Acting OSD set, the primary OSD, the last time the PG was reported, the state of the PG, the time at which a normal scrub as well as a deep-scrub was run etc..</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>