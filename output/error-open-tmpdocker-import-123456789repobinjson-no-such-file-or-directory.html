<!DOCTYPE html>
<html lang="en">
<head>
          <title>arvimal.github.io - "\"Error: open /tmp/docker-import-123456789/repo/bin/json: no such file or directory\""</title>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <link href="https://arvimal.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="arvimal.github.io Full Atom Feed" />
        <link href="https://arvimal.github.io/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate" title="arvimal.github.io Categories Atom Feed" />





</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://arvimal.github.io/">arvimal.github.io</a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/archives.html">Archives</a></li>
            <li><a href="/categories.html">Categories</a></li>
            <li><a href="/tags.html">Tags</a></li>
            <li class="active"><a href="https://arvimal.github.io/category/misc.html">misc</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://arvimal.github.io/error-open-tmpdocker-import-123456789repobinjson-no-such-file-or-directory.html" rel="bookmark"
         title="Permalink to "\"Error: open /tmp/docker-import-123456789/repo/bin/json: no such file or directory\""">"\"Error: open /tmp/docker-import-123456789/repo/bin/json: no such file or directory\""</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2014-08-16T00:00:00+02:00">
      August 16, 2014
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://arvimal.github.io/author/vimal-ar.html">Vimal A.R</a>
    </address>
    <div class="category">
        Category: <a href="https://arvimal.github.io/category/misc.html">misc</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <h2>- "techno"</h2>
<p>I've been trying to create a minimal docker image for RHEL versions, for one of my projects. The following were the steps I followed:</p>
<p>a) Installed a RHEL6.5 server with 'Minimal Installation'.</p>
<p>b) Registered it to the local satellite.</p>
<p>c) Created a tar-ball of the filesystem with the command below:</p>
<p>[sourcecode language="bash" gutter="false"]</p>
<p># tar --numeric-owner --exclude=/proc --exclude=/sys --exclude=/mnt --exclude=/var/cache</p>
<p>--exclude=/usr/share/doc --exclude=/tmp --exclude=/var/log -zcvf /mnt/rhel6.5-base.tar.gz /</p>
<p>[/sourcecode]</p>
<p>d) Load the tar.gz image using 'docker load' (as per the man page of 'docker load')</p>
<p>[sourcecode language="bash" gutter="false"]</p>
<p># docker load -i rhel6.5-base.tar.gz</p>
<p>[/sourcecode]</p>
<p>This is where it erred with the message:</p>
<p>[sourcecode language="bash" gutter="false"]</p>
<p>2014/08/16 20:37:42 Error: open /tmp/docker-import-123456789/repo/bin/json: no such file or directory</p>
<p>[/sourcecode]</p>
<p>After a bit of searching and testing, I found that 'docker load -i' doesn't work as expected. The workaround is to cat and pipe the tar.gz file, as shown below:</p>
<p>[sourcecode language="bash" gutter="false"]</p>
<p># cat rhel6.5-base.tar.gz | docker import - rhel6/6.5</p>
<p>[/sourcecode]</p>
<p>This ends up with the image showing up in 'docker images'</p>
<p>[sourcecode language="bash" gutter="false"]</p>
<p># docker images</p>
<p>REPOSITORY   TAG    IMAGE ID           CREATED                  VIRTUAL SIZE rhel6/6.1           latest  32b4b345454a  About a minute ago 1.251 GB</p>
<p>[/sourcecode]</p>
<p>Update: 'docker load -i <image-file>' would only work if the image is created as a layered docker image. If the <image-file> is a tar ball created from a root filesystem, you would need to use 'cat <image-file> | docker import <name>'</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>