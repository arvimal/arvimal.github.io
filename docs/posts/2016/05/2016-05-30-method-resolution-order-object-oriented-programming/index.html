<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Method Resolution Order - Object Oriented Programming - The Child is Father of the Man</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="The Child is Father of the Man" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">The Child is Father of the Man</div>
					<div class="logo__tagline">Technical notes... almost</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">Home Page</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about">
				
				<span class="menu__text">About me</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/resume">
				
				<span class="menu__text">Resume</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Method Resolution Order - Object Oriented Programming</h1>
			
		</header><div class="content post__content clearfix">
			<p>_<strong>M</strong>_ethod Resolution Order or &lsquo;MRO&rsquo; in short, denotes the way a programming language resolves a method or attribute. This post looks into how Method Resolution Order works, using Python.</p>
<p>Python supports classes inheriting from other classes. The class being inherited is called the Parent/Super class, while the class that inherits is called the Child/Sub class.</p>
<p>While inheriting from another class, the interpreter needs a way to resolve the methods that are being called via an instance. Hence a method resolution order is needed.</p>
<p><em><strong>Example 0:</strong></em></p>
<p>[code language=&ldquo;python&rdquo;]</p>
<p>class A(object): def my_func(self): print(&ldquo;Doing this in class A&rdquo;)</p>
<p>class B(A): def my_func(self): print(&ldquo;Doing this in class B&rdquo;)</p>
<p>my_instance = B() my_instance.my_func() [/code]</p>
<h3 id="structure"><strong>Structure:</strong></h3>
<ol>
<li>We&rsquo;ve two classes,  <code>class A</code> and <code>class B</code>.</li>
<li>Instantiate <code>class B</code> as <code>my_instance</code>.</li>
<li>Call the <code>my_func()</code> method through the <code>my_instance</code> instance.</li>
</ol>
<p>Where is the method fetched from? From <code>class B</code> or <code>class A</code>?</p>
<h3 id="how-does-the-code-work"><strong>How does the code work?</strong></h3>
<p>This should be pretty obvious, the answer would be <code>class B</code>. But why is it being called from <code>class B</code> and not from <code>class A</code>?</p>
<p>Answer : The <strong>Method Resolution Order</strong> [MRO].</p>
<p>To understand this in depth, let&rsquo;s check another example:</p>
<p><em><strong>Example 1:</strong></em></p>
<p>[code language=&ldquo;python&rdquo;] class A(object): def my_func(self): print(&ldquo;Doing this in Class A&rdquo;)</p>
<p>class B(A): pass</p>
<p>class C(object): def my_func(self): print(&ldquo;Doing this in Class C&rdquo;)</p>
<p>class D(B, C): pass</p>
<p>my_instance = D() my_instance.my_func() [/code]</p>
<h3 id="structure__"><strong>Structure</strong><em><strong>:</strong></em></h3>
<ol>
<li>Four classes, class <code>A</code>, <code>B</code>, <code>C</code>, and <code>D</code>.</li>
<li>Class <code>D</code> inherits from both <code>B</code> and <code>C</code></li>
<li>Class <code>B</code> inherits from <code>A</code>.</li>
<li>Class <code>A</code> and <code>C</code> doesn&rsquo;t inherit from any super classes, but from the <code>object</code> base class due to being new-style classes.</li>
<li>Class <code>A</code> and class <code>C</code> both have a method/function named <code>my_func()</code>.</li>
<li>Class <code>D</code> is instantiated through <code>my_instance</code></li>
</ol>
<p>If we were to call the method <code>my_func()</code> through the <code>my_instance()</code> instance, which class would it be called from? Would it be from class <code>A</code> or class <code>C</code>?</p>
<h3 id="how-does-the-code-work-1"><strong>How does the code work?</strong></h3>
<p>This won&rsquo;t be as obvious as <em><strong>Example 0.</strong></em></p>
<ol>
<li>The instance <code>my_instance()</code> is created from class <code>D</code>.</li>
<li>Since class <code>D</code>inherits from both class <code>B</code> and <code>C</code>, the python interpreter searches for the method <code>my_func()</code> in both of these classes.</li>
<li>The intrepreter finds that class <code>B</code> inherits from class <code>A</code>, and class <code>C</code> doesn&rsquo;t have any super classes other than the default <code>object</code> class.</li>
<li>Class <code>A</code> and class <code>C</code> both has the method named <code>my_func()</code>, and hence has to be called from one of these.</li>
<li><strong>Python follows a depth-first lookup order and hence ends up calling the method from class A.</strong></li>
</ol>
<p>Following the depth-first Method Resolution Order, the lookup would be in the order :</p>
<p><em><strong>Class D -&gt; Class B -&gt; Class C</strong></em></p>
<p>Let&rsquo;s check another example, which can be a bit more complex.</p>
<p><em><strong>Example 2:</strong></em></p>
<p>[code language=&ldquo;python&rdquo;] class A(object): def my_func(self): print(&ldquo;Doing this in A&rdquo;)</p>
<p>class B(A): pass</p>
<p>class C(A): def my_func(self): print(&ldquo;doing this in C&rdquo;)</p>
<p>class D(B, C): pass</p>
<p>my_instance = D() my_instance.my_func() [/code]</p>
<h3 id="structure-1"><strong>Structure:</strong></h3>
<ol>
<li>Four classes, class <code>A</code>, <code>B</code>, <code>C</code>, and <code>D</code></li>
<li>Class <code>D</code> inherits from both <code>B</code> and <code>C</code></li>
<li>Class <code>B</code> inherits from class <code>A</code>.</li>
<li>Class <code>C</code> inherits from class <code>A</code>.</li>
<li>Class <code>A</code> inherits from the default base class <code>object</code>.</li>
</ol>
<p><strong>This sort of inheritance is called the <code>Diamond Inheritance</code> or the <code>Deadly Diamond of death</code> and looks like the following:</strong></p>
<p> </p>
<p><img src="images/220px-diamond_inheritance-svg.png" alt="220px-Diamond_inheritance.svg"></p>
<p><em>Image courtsey : <a href="https://en.wikipedia.org/wiki/Multiple_inheritance">Wikipedia</a></em></p>
<h3 id="how-does-the-code-work-2"><strong>How does the code work?</strong></h3>
<p>Following the depth-first Method Resolution Order, the lookup would be in the order :</p>
<p><em><strong>Class D -&gt; Class B -&gt; Class A -&gt; Class C -&gt; Class A</strong></em></p>
<p>In order to avoid ambiguity while doing a lookup for a method where multiple classes are inherited and involved, the MRO lookup has changed slightly from Python 2.3 onwards.</p>
<p>It still goes for the depth-first order, but if the occurrence of a class happens multiple times in the MRO path, it removes the initial occurrence and keeps the latter.</p>
<p>Hence, the look up order in <em><strong>Example 2</strong></em> becomes:</p>
<p><em><strong>Class D -&gt; Class B -&gt; Class C -&gt; Class A.</strong></em></p>
<p><strong>NOTE: Python provides a method for a class to lookup the Method Resolution Order. Let&rsquo;s recheck Example 2 using that.</strong></p>
<p>[code language=&ldquo;python&rdquo;] class A(object): def my_func(self): print(&ldquo;Calling this from A&rdquo;)</p>
<p>class B(A): pass</p>
<p>class C(A): def my_func(self): print(&quot;\nCalling this from C&quot;)</p>
<p>class D(B, C): pass</p>
<p>my_instance = D() my_instance.my_func()</p>
<p>print(&quot;\nPrint the Method Resolution Order&quot;) print(D.mro()) print(D.__bases__) [/code] This should print:</p>
<p>[code language=&ldquo;python&rdquo;] # python /tmp/Example-2.py</p>
<p>Calling this from C</p>
<p>Print the Method Resolution Order class &lsquo;__main__.D&rsquo;, class &lsquo;__main__.B&rsquo;, class &lsquo;__main__.C&rsquo;, class &lsquo;__main__.A&rsquo;, type &lsquo;object&rsquo;</p>
<p>(, ) [/code]</p>
<h3 id="takeaway">Takeaway:</h3>
<ol>
<li>Python follows a depth-first order for resolving methods and attributes.</li>
<li>In case of multiple inheritances where the methods happen to occur more than once, python omits the first occurrence of a class in the Method Resolution Order.</li>
<li>The <code>&lt;class&gt;.mro()</code>methods helps to understand the Medthod Resolution Order.</li>
<li>The `__bases__` and `__base__` magic methods help to understand the Base/Parent classes of a Sub/Child class.</li>
</ol>
<h3 id="references">References:</h3>
<ol>
<li><a href="https://en.wikipedia.org/wiki/Multiple_inheritance">https://en.wikipedia.org/wiki/Multiple_inheritance</a></li>
</ol>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/inheritance/" rel="tag">inheritance</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/method-resolution-order/" rel="tag">method-resolution-order</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/mro/" rel="tag">mro</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/python/" rel="tag">python</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/__bases__/" rel="tag">__bases__</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/__base__/" rel="tag">__base__</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 The Child is Father of the Man.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>