<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
    
    
      <link href="/css/fonts.css" rel="stylesheet" type="text/css">
    
  

  
  <title>The Child is Father of the Man</title>

  
  
  <link rel="stylesheet" href="/css/hugo-octopress.css">

  
  

  
    <link rel="stylesheet" href="/css/fork-awesome.min.css">
  

  
  <link href="https://arvimal.github.io/favicon.png" rel="icon">

  
  <link href="/index.xml" rel="alternate" type="application/rss+xml" title="The Child is Father of the Man" />

  <meta name="description" content="" />
  <meta name="keywords" content="">
  <meta name="author" content="">

  
  <meta name="generator" content="Hugo 0.80.0" />

  
  

  
  

  
  



</head>
<body>


<header role="banner">
<hgroup>
  
  <h1><a href="https://arvimal.github.io/">The Child is Father of the Man</a></h1>
    <h2></h2>
</hgroup></header>


<nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
      
  </select>
</fieldset>


<ul class="main-navigation">
  
  
</ul>

<ul class="subscription">
  
</ul>


</nav>




  

<div id="main">
  <div id="content">
    <div class="blog-index">
      
      
      <article>
        
        

<header>
  <p class="meta">Sep 18, 2015
     - 2 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/09/2015-09-18-how-to-get-a-listing-of-the-osd-nodes-in-an-easily-scriptable-format/">OSD information in a scriptable format</a>
  </h1>
</header>

        
          <p>In case you are trying to get the OSD ID and the corresponding node IP address mappings in a script-able format, use the following command:
 # ceph osd find  This will print the OSD number, the IP address, the host name, and the default root in the CRUSH map, as a python dictionary.
 # ceph osd find 2 { &ldquo;osd&rdquo;: 2, &ldquo;ip&rdquo;: &ldquo;192.168.122.112:6800\/5311&rdquo;, &ldquo;crush_location&rdquo;: { &ldquo;host&rdquo;: &ldquo;node4&rdquo;, &ldquo;root&rdquo;: &ldquo;default&rdquo;}}</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/09/2015-09-18-how-to-get-a-listing-of-the-osd-nodes-in-an-easily-scriptable-format/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Sep 1, 2015
     - 3 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/09/2015-09-01-how-to-extract-view-change-and-inject-a-monitor-map-in-a-ceph-cluster/">Monitor maps, how to edit them?</a>
  </h1>
</header>

        
          <p>The MON map is used by the monitors in a Ceph cluster, where they keep track of various attributes relevant to the working of the cluster.
Similar to the CRUSH map, a monitor map can be pulled out of the cluster, inspected, changed, and injected back to the monitors, manually. A frequent use-case is when the IP address of a monitor changes and the monitors cannot agree on a quorum.</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/09/2015-09-01-how-to-extract-view-change-and-inject-a-monitor-map-in-a-ceph-cluster/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Aug 30, 2015
     - 3 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a><a class="label" href="https://arvimal.github.io/categories/programming/">programming </a><a class="label" href="https://arvimal.github.io/categories/python/">python </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/08/2015-08-30-calculate-a-pg-id-from-the-ceph-osd-debug-logs/">Calculate a PG id from the hex values in Ceph OSD debug logs</a>
  </h1>
</header>

        
          <p>Recently, I had an incident where the OSDs were crashing at the time of startup. Obviously, the next step was to enable debug logs for the OSDs and understand where they were crashing.
Enabled OSD debug logs dynamically by injecting it with:
 # ceph tell osd.* injectargs &ndash;debug-osd 20 &ndash;debug-ms 1
 NOTE: This command can be run from the MON nodes.
Once this was done, the OSDs were started manually (since it were crashing and not running) and watched out for the next crash.</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/08/2015-08-30-calculate-a-pg-id-from-the-ceph-osd-debug-logs/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Aug 17, 2015
     - 2 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/08/2015-08-17-how-can-we-map-a-pg-to-a-pool/">Mapping Placement Groups and Pools</a>
  </h1>
</header>

        
          <p>Understanding the mapping of Pools and Placement Groups can be very useful while troubleshooting Ceph problems.
A direct method is to dump information on the PGs via :
 # ceph pg dump
 This command should output something like the following:
 pg_stat objects mip degr unf bytes log disklog state 5.7a 0 0 0 0 0 0 0 active+clean
 The output will have more information, and I&rsquo;ve omitted it for the sake of explanation.</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/08/2015-08-17-how-can-we-map-a-pg-to-a-pool/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Aug 5, 2015
     - 2 minute read 
    

    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/08/2015-08-05-how-to-check-the-journal-disk-for-any-particular-osd/">How to identify the journal disk for a Ceph OSD?</a>
  </h1>
</header>

        
          <p>In many cases, one would like to understand the journal disk a particular OSD is using. There are two methods to understand this:
a) This is the most direct method, and should give you details on the OSD disks and the corresponding journal disks.
[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;]
# ceph-disk list
[/sourcecode]
This should output something like:
[sourcecode language=&ldquo;bash&rdquo; gutter=&ldquo;false&rdquo;]
# ceph-disk list /dev/sda : /dev/sda1 other, xfs, mounted on /boot /dev/sda2 other, LVM2_member /dev/sr0 other, unknown /dev/vda : /dev/vda1 ceph data, active, cluster ceph, osd.</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/08/2015-08-05-how-to-check-the-journal-disk-for-any-particular-osd/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 13, 2015
     - 1 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/07/2015-07-13-how-can-we-resetchange-the-calamari-interface-password/">Resetting Calamari password</a>
  </h1>
</header>

        
          <p>&lsquo;Calamari&rsquo; is the monitoring interface for a Ceph cluster.
The Calamari interface password can be reset/changed using the &lsquo;calamari-ctl&rsquo; command.
 # calamari-ctl change_password &ndash;password {password} {user-name}
 calamari-ctl can also be used to add a user, as well as disable, enable, and rename the user account. A &lsquo;&ndash;help&rsquo; should print out all the available ones.
 # calamari-ctl &ndash;help
 </p>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 9, 2015
     - 1 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/07/2015-07-09-how-to-compact-a-ceph-monitor-store/">Compacting a Ceph monitor store</a>
  </h1>
</header>

        
          <p>The Ceph monitor store growing to a big size is a common occurrence in a busy Ceph cluster.
If a &lsquo;ceph -s&rsquo; takes considerable time to return information, one of the possibility is the monitor database being large.
Other reasons included network lags between the client and the monitor, the monitor not responding properly due to the system load, firewall settings on the client or monitor etc..
The best way to deal with a large monitor database is to compact the monitor store.</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/07/2015-07-09-how-to-compact-a-ceph-monitor-store/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 8, 2015
     - 1 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/07/2015-07-08-what-is-data-scrubbing/">What is data scrubbing?</a>
  </h1>
</header>

        
          <p>Data Scrubbing is an error checking and correction method or routine check to ensure that the data on file systems are in pristine condition, and has no errors. Data integrity is of primary concern in today&rsquo;s conditions, given the humongous amounts of data being read and written daily.
A simple example for a scrubbing, is a file system check done on file systems with tools like &lsquo;e2fsck&rsquo; in EXT2/3/4, or &lsquo;xfs_repair&rsquo; in XFS.</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/07/2015-07-08-what-is-data-scrubbing/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jun 3, 2015
     - 1 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/06/2015-06-03-another-method-to-dynamically-change-a-ceph-configuration/">Another method to dynamically change a Ceph configuration</a>
  </h1>
</header>

        
          <p>In a previous post, we saw how to dynamically change a tunable on a running Ceph cluster dynamically. Unfortunately, such a change is not permanent, and will revert back to the previous setting once ceph is restarted.
Rather than using the command &lsquo;ceph tell&rsquo;, I recently came upon another way to change configuration values.
We&rsquo;ll try changing the tunable &lsquo;mon_osd_full_ratio&rsquo; once again.
1. Get the current setting
 # ceph daemon osd.</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/06/2015-06-03-another-method-to-dynamically-change-a-ceph-configuration/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">May 27, 2015
     - 2 minute read 
    

    
    
      - <a class="label" href="https://arvimal.github.io/categories/ceph/">ceph </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://arvimal.github.io/posts/2015/05/2015-05-27-what-does-the-noout-status-on-the-osds-actually-do/">&#39;noout&#39; flag in Ceph</a>
  </h1>
</header>

        
          <p>You may have seen the &lsquo;noout&rsquo; flag set in the output of &lsquo;ceph -s&rsquo;. What does this actually mean?
This is a global flag for the cluster, which means that if an OSD is out, the said OSD is not marked out of the cluster and data balancing shouldn&rsquo;t start to maintain the replica count. By default, the monitors mark the OSDs out of the acting set if it is not reachable for 300 seconds, ie.</p>
          
            <footer>
              <a href="https://arvimal.github.io/posts/2015/05/2015-05-27-what-does-the-noout-status-on-the-osds-actually-do/" rel="full-article">Read On &rarr;</a>
            </footer>
          
        
      </article>
      
      
      






<div class="pagination">

    
        
        
        
        <a href="/" aria-label="First" class="label-pagination"><i class="fa fa-angle-double-left fa-lg"></i></a>
    

    
    
        <a href="/page/3/" aria-label="Previous" class="label-pagination"><i class="fa fa-angle-left fa-lg"></i></a>
    

    
        <a href="/" class="label-pagination">1</a>
    
        <a href="/page/2/" class="label-pagination">2</a>
    
        <a href="/page/3/" class="label-pagination">3</a>
    
        <a href="/page/4/" class="label-pagination">4</a>
    
        <a href="/page/5/" class="label-pagination">5</a>
    
        <a href="/page/6/" class="label-pagination">6</a>
    
        <a href="/page/7/" class="label-pagination">7</a>
    

    
    
        <a href="/page/5/" aria-label="Next" class="label-pagination"><i class="fa fa-angle-right fa-lg"></i></a>
    

    
    
        <a href="/page/7/" aria-label="Last"><i class="fa fa-angle-double-right fa-lg"></i></a>
    

</div>

  
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>



  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      
      
      
      
      
         
      
      
      
      
      
      
      

    
    
    </li>
  </ul>

  

  

  
  
  
</aside>
    
  </div>
</div>
    <footer role="contentinfo">
      <p>Copyright &copy; 2021  - <a href="https://arvimal.github.io/license/">License</a> -
        <span class="credit">Powered by <a target="_blank" href="https://gohugo.io" rel="noopener noreferrer">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/" rel="noopener noreferrer">Hugo-Octopress</a> theme.
      </p>
    </footer>

    
    



    
    
    

    
  </body>
</html>
   

